(self.webpackChunkmixer=self.webpackChunkmixer||[]).push([[8562],{8562:(t,e,n)=>{"use strict";n.r(e),n.d(e,{HomePageModule:()=>p});var i=n(8583),o=n(7823),s=n(665),r=n(3686),c=n(8720),a=n(1628);let l=(()=>{class t{constructor(t){this.storage=t,this.mixes=[],this.storage.create()}allMixes(){return this.storage.get("mixes").then(t=>{let e=[];return t&&Array.isArray(t)&&(e=t),e}).then(t=>(this.mixes=t,t))}addMix(t){return this.mixes.push(t),this.storage.set("mixes",this.mixes).then(()=>this.mixes)}removeMix(t){return this.mixes.splice(t,1),this.storage.set("mixes",this.mixes).then(()=>this.mixes)}}return t.\u0275fac=function(e){return new(e||t)(c.LFG(a.K))},t.\u0275prov=c.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function u(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-toolbar"),c.TgZ(1,"ion-item"),c.TgZ(2,"ion-label"),c._uU(3,"Nombre del mix"),c.qZA(),c.TgZ(4,"ion-input",9),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().name=e}),c.qZA(),c.qZA(),c.TgZ(5,"ion-item"),c.TgZ(6,"ion-label"),c._uU(7,"Mix MP3"),c.qZA(),c.TgZ(8,"div",10),c.TgZ(9,"label",11),c._uU(10,"Choose File"),c.qZA(),c.TgZ(11,"input",12),c.NdJ("ngModelChange",function(e){return c.CHM(t),c.oxw().file=e})("change",function(e){return c.CHM(t),c.oxw().handleFileInput(e.target)}),c.qZA(),c.qZA(),c.qZA(),c.TgZ(12,"ion-button",13),c.NdJ("click",function(){return c.CHM(t),c.oxw().addMix()}),c._uU(13," Add "),c._UZ(14,"ion-icon",14),c.qZA(),c.qZA()}if(2&t){const t=c.oxw();c.xp6(4),c.Q6J("ngModel",t.name),c.xp6(7),c.Q6J("ngModel",t.file)}}const d=function(t){return{"mix-click":t}};function h(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"div",15),c.TgZ(1,"div",16),c.TgZ(2,"div",17),c.TgZ(3,"span",16),c._uU(4),c.qZA(),c.TgZ(5,"span",18),c.NdJ("click",function(){const e=c.CHM(t).index;return c.oxw().playMix(e)}),c._UZ(6,"ion-icon",19),c.qZA(),c.qZA(),c.TgZ(7,"ion-button",13),c.NdJ("click",function(){const e=c.CHM(t).index;return c.oxw().removeMix(e)}),c._uU(8," Delete "),c._UZ(9,"ion-icon",20),c.qZA(),c.qZA(),c.qZA()}if(2&t){const t=e.$implicit,n=e.index,i=c.oxw();c.Q6J("ngClass",c.VKq(2,d,n===i.indexClick)),c.xp6(4),c.Oqu(t.name)}}function x(t,e){if(1&t){const t=c.EpF();c.TgZ(0,"ion-button",13),c.NdJ("click",function(){return c.CHM(t),c.oxw().stopMix()}),c._uU(1," Stop "),c._UZ(2,"ion-icon",21),c.qZA()}}const g=[{path:"",component:(()=>{class t{constructor(t,e,n,i,o,s,r){this.mixerProvider=t,this.alertCtrl=e,this.loadingCtrl=n,this.modalCtrl=i,this.router=o,this.routerOutlet=s,this.toastCtrl=r,this.mixes=[],this.indexClick=-1,this.name="",this.showAdd=!1,this.currentMix=new Audio}handleFileInput(t){const e=new FileReader;e.readAsDataURL(t.files.item(0)),e.onload=()=>{this.fileBase64=e.result.toString()},e.onerror=t=>{this.presentToast(t).then(()=>{})}}ngOnInit(){this.updateMixer()}updateMixer(){this.mixerProvider.allMixes().then(t=>{this.mixes=t}).catch(t=>{this.presentToast(t).then(()=>{})})}removeMix(t){this.mixerProvider.removeMix(t).then(t=>{this.mixes=t}).catch(t=>{this.presentToast(t).then(()=>{})})}addMix(){this.mixerProvider.addMix({name:this.name,data:this.fileBase64,date:(new Date).getTime()}).then(t=>{this.mixes=t,this.name="",this.fileBase64="",this.file=void 0}).catch(t=>{this.presentToast(t).then(()=>{})})}playMix(t){this.stopMix(),this.indexClick=t,this.currentMix=new Audio(this.mixes[t].data),this.currentMix.play(),this.currentMix.addEventListener("ended",()=>{this.indexClick=-1})}stopMix(){this.currentMix.pause(),this.indexClick=-1}presentToast(t){return e=this,void 0,i=function*(){(yield this.toastCtrl.create({message:t,duration:2e3})).present()},new((n=void 0)||(n=Promise))(function(t,o){function s(t){try{c(i.next(t))}catch(e){o(e)}}function r(t){try{c(i.throw(t))}catch(e){o(e)}}function c(e){var i;e.done?t(e.value):(i=e.value,i instanceof n?i:new n(function(t){t(i)})).then(s,r)}c((i=i.apply(e,[])).next())});var e,n,i}}return t.\u0275fac=function(e){return new(e||t)(c.Y36(l),c.Y36(o.Br),c.Y36(o.HT),c.Y36(o.IN),c.Y36(r.F0),c.Y36(o.jP),c.Y36(o.yF))},t.\u0275cmp=c.Xpm({type:t,selectors:[["app-home"]],decls:13,vars:4,consts:[["translucent","true"],["slot","end"],[3,"click"],["slot","icon-only",3,"name"],[4,"ngIf"],["fullscreen","true"],[1,"flex","w100"],["class","w100 mix",3,"ngClass",4,"ngFor","ngForOf"],["expand","full",3,"click",4,"ngIf"],[3,"ngModel","ngModelChange"],[1,"form-group"],["for","file"],["type","file","id","file",3,"ngModel","ngModelChange","change"],["expand","full",3,"click"],["slot","start","name","add"],[1,"w100","mix",3,"ngClass"],[1,"w100"],[1,"w100","mix-information"],[1,"play",3,"click"],["name","musical-notes-outline"],["slot","start","name","trash"],["slot","start","name","stop"]],template:function(t,e){1&t&&(c.TgZ(0,"ion-header",0),c.TgZ(1,"ion-toolbar"),c.TgZ(2,"ion-title"),c._uU(3,"Mixer"),c.qZA(),c.TgZ(4,"ion-buttons",1),c.TgZ(5,"ion-button",2),c.NdJ("click",function(){return e.showAdd=!e.showAdd}),c._UZ(6,"ion-icon",3),c.qZA(),c.qZA(),c.qZA(),c.YNc(7,u,15,2,"ion-toolbar",4),c.qZA(),c.TgZ(8,"ion-content",5),c.TgZ(9,"div",6),c.YNc(10,h,10,4,"div",7),c.qZA(),c.qZA(),c.TgZ(11,"ion-footer"),c.YNc(12,x,3,0,"ion-button",8),c.qZA()),2&t&&(c.xp6(6),c.Q6J("name",e.showAdd?"close":"add"),c.xp6(1),c.Q6J("ngIf",e.showAdd),c.xp6(3),c.Q6J("ngForOf",e.mixes),c.xp6(2),c.Q6J("ngIf",-1!==e.indexClick))},directives:[o.Gu,o.sr,o.wd,o.Sm,o.YG,o.gu,i.O5,o.W2,i.sg,o.fr,o.Ie,o.Q$,o.pK,o.j9,s.JJ,s.On,s.Fj,i.mk],styles:["#container[_ngcontent-%COMP%]{text-align:center;position:absolute;left:0;right:0;top:50%;transform:translateY(-50%)}#container[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-size:20px;line-height:26px}#container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;line-height:22px;color:#8c8c8c;margin:0}#container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}"]}),t})()}];let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[r.Bz.forChild(g)],r.Bz]}),t})(),p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=c.oAB({type:t}),t.\u0275inj=c.cJS({imports:[[i.ez,s.u5,o.Pc,m]]}),t})()}}]);